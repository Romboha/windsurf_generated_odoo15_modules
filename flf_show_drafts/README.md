# FLF Show Draft Pickings Count

## Огляд

Модуль `flf_show_drafts` розширює стандартний функціонал Odoo Inventory, додаючи відображення кількості чернеток (draft) документів переміщення товарів (stock pickings) безпосередньо на картках типів операцій у Kanban-представленні (наприклад, "Надходження", "Внутрішні переміщення", "Доставки"). Відображення лічильника чернеток тепер **контролюється налаштуванням для кожної компанії**, дозволяючи гнучко керувати видимістю цієї інформації.

## Основні можливості

- **Відображення лічильника чернеток**: На кожній картці типу операції (наприклад, WH/IN, WH/OUT) з'являється лічильник, що показує кількість пов'язаних документів переміщення товарів, які перебувають у статусі "Чернетка".
- **Умовне відображення**: Лічильник чернеток відображається лише якщо відповідне налаштування увімкнене для компанії, до якої належить тип операції.
- **Налаштування на рівні компанії**: Можливість увімкнути або вимкнути показ лічильників чернеток для кожної компанії окремо через Загальні налаштування Odoo (розділ "Склад").
- **Швидкий доступ до чернеток**: Клікнувши на цей лічильник (якщо він видимий), користувач переходить до списку відповідних чернеток документів переміщення, вже відфільтрованих за обраним типом операції та статусом "Чернетка".
- **Покращена видимість**: Дозволяє користувачам швидко оцінити кількість запланованих, але ще не підтверджених операцій, що сприяє кращому управлінню складськими процесами, з урахуванням політик компанії.

## Встановлення

1.  Скопіюйте папку `flf_show_drafts` у вашу директорію з додатковими модулями Odoo (custom addons).
2.  Перейдіть у режим розробника в Odoo.
3.  Відкрийте "Програми" (Apps).
4.  Натисніть "Оновити список програм" (Update Apps List).
5.  Знайдіть модуль "FLF Show Draft Pickings Count" у списку та натисніть "Встановити" (Install).

## Налаштування

Після встановлення модуля, видимість лічильника чернеток можна налаштувати для кожної компанії:

1.  Перейдіть до "Налаштування" (Settings) -> "Загальні налаштування" (General Settings).
2.  Оберіть компанію, для якої ви хочете змінити налаштування (якщо у вас багатокомпанійне середовище).
3.  У розділі "Склад" (Inventory) знайдіть опцію "Показувати кількість чернеток в огляді операцій" (Show draft count in operations overview).
4.  Встановіть або зніміть прапорець для увімкнення або вимкнення функції для поточної компанії.
5.  Натисніть "Зберегти" (Save).

## Використання

Після встановлення та налаштування модуля:

1.  Перейдіть до розділу "Склад" (Inventory) -> "Конфігурація" (Configuration) -> "Типи операцій" (Operation Types).
2.  На Kanban-представленні ви побачите новий лічильник "Чернетки" (Drafts) на картках тих типів операцій, для компаній яких увімкнено відповідне налаштування, і якщо для них існують документи переміщення у статусі "Чернетка".

## Технічні деталі (для розробників)

- **Модель `res.company`**: Додано поле `show_drafts_in_overview_setting` (boolean) для зберігання налаштування компанії.
- **Модель `res.config.settings`**: Додано поле `show_drafts_in_overview` (related до `company_id.show_drafts_in_overview_setting`) для управління налаштуванням через інтерфейс Загальних налаштувань.
- **Модель `stock.picking.type`**:
    - Додано поле `show_drafts_enabled` (compute, store=True), яке визначає, чи потрібно показувати лічильник чернеток для даного типу операції, базуючись на налаштуванні `company_id.show_drafts_in_overview_setting`.
    - Додано поле `draft_count` (compute, store=True) для підрахунку кількості чернеток.
- **Представлення**:
    - `res_config_settings_views.xml`: Розширено для додавання опції налаштування.
    - `stock_picking_type_views.xml`: Модифіковано Kanban-представлення для умовного відображення лічильника чернеток (`t-if="record.show_drafts_enabled.raw_value and record.draft_count.raw_value"`).

## Залежності

- `stock` (стандартний модуль Odoo Inventory)

## Ліцензія

LGPL-3
